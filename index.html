<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>NotMyWallet ‚Äì Flag Your Hacked Wallet</title>

  <script src="https://unpkg.com/@solana/web3.js@latest/lib/index.iife.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/web3/4.2.2/web3.min.js"></script>

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;600;700&display=swap" rel="stylesheet">

  <style>
    :root {
      --bg: #020617;
      --card-bg: rgba(15, 23, 42, 0.95);
      --border: rgba(148, 163, 184, 0.4);
      --text: #e5e7eb;
      --muted: #9ca3af;
      --accent: #22c55e;
      --accent-glow: rgba(34, 197, 94, 0.4);
      --accent-2: #a855f7;
      --danger: #ef4444;
      --radius: 24px;
    }

    * { margin:0; padding:0; box-sizing:border-box; }

    body {
      min-height: 100vh;
      background: radial-gradient(circle at top, rgba(34,197,94,0.15), transparent 60%),
                  radial-gradient(circle at bottom, rgba(168,85,247,0.15), transparent 60%),
                  var(--bg);
      color: var(--text);
      font-family: "Space Grotesk", sans-serif;
      display: flex; flex-direction: column; overflow-x: hidden;
    }

    /* --- BACKGROUND ANIMATION --- */
    .bg-layer { position: fixed; inset: 0; z-index: -1; pointer-events: none; }
    .floating-icon { position: absolute; font-size: 80px; opacity: 0.1; filter: grayscale(1); animation: float 10s infinite ease-in-out; }
    .i1 { top: 10%; left: 5%; } .i2 { top: 60%; right: 10%; } .i3 { bottom: 10%; left: 20%; }
    @keyframes float { 0%, 100% { transform: translateY(0) rotate(0deg); } 50% { transform: translateY(-20px) rotate(10deg); } }

    /* --- LAYOUT --- */
    .page { max-width: 1100px; margin: 0 auto; padding: 20px; width: 100%; z-index: 10; }

    /* HEADER */
    header { display: flex; justify-content: space-between; align-items: center; padding: 20px 0; margin-bottom: 40px; }
    .brand { display: flex; align-items: center; gap: 15px; }
    .logo {
      width: 60px; height: 60px; border-radius: 50%;
      background: url('https://i.imgur.com/vEnlNJU.jpg') center/cover;
      border: 2px solid var(--accent); box-shadow: 0 0 20px var(--accent-glow);
    }
    .brand h1 { font-size: 1.5rem; font-weight: 800; text-transform: uppercase; margin: 0; letter-spacing: -1px; }
    .brand p { font-size: 0.8rem; color: var(--muted); text-transform: uppercase; letter-spacing: 2px; margin: 0; }
    
    .share-btn {
      background: rgba(255,255,255,0.05); border: 1px solid var(--muted); color: #fff;
      padding: 10px 20px; border-radius: 50px; cursor: pointer; transition: 0.3s; text-transform: uppercase; font-size: 0.8rem; font-weight: bold;
    }
    .share-btn:hover { border-color: var(--accent); color: var(--accent); }

    /* HERO */
    .hero { display: grid; grid-template-columns: 1fr 1fr; gap: 50px; align-items: center; margin-bottom: 50px; }
    @media(max-width: 850px) { .hero { grid-template-columns: 1fr; text-align: center; } }

    .hero-content h2 { font-size: 3.5rem; line-height: 1; margin: 0 0 20px 0; text-transform: uppercase; }
    .hero-content span { color: var(--accent); }
    .hero-content p { font-size: 1.1rem; color: var(--muted); line-height: 1.6; }
    .hero-pill { display: inline-block; padding: 5px 12px; border-radius: 20px; border: 1px solid var(--accent); background: rgba(34,197,94,0.1); color: var(--accent); font-size: 0.75rem; text-transform: uppercase; margin-bottom: 15px; letter-spacing: 1px; }

    .pepe-visual {
      width: 100%; border-radius: var(--radius); border: 1px solid var(--border);
      box-shadow: 0 20px 50px rgba(0,0,0,0.8);
      /* IMAGE PEPE BURNING */
      content: url('https://i.imgur.com/3vZfK5L.png');
    }

    /* PANEL (ACTION) */
    .panel {
      background: var(--card-bg); border: 1px solid var(--border); border-radius: var(--radius);
      padding: 40px; box-shadow: 0 0 50px rgba(0,0,0,0.5);
    }

    /* NETWORK SWITCHER STYLED */
    .net-selector { display: flex; gap: 10px; margin-bottom: 20px; justify-content: center; }
    .net-btn {
      background: rgba(0,0,0,0.5); border: 1px solid #333; color: #666;
      padding: 10px 20px; border-radius: 12px; cursor: pointer; font-weight: bold; font-family: inherit; transition: 0.2s; width: 100px;
    }
    .net-btn:hover { border-color: #fff; color: #fff; }
    .net-btn.active { background: var(--accent); color: #000; border-color: var(--accent); box-shadow: 0 0 20px var(--accent-glow); }

    .status-box {
      background: #000; font-family: monospace; color: var(--accent); padding: 15px;
      border-radius: 12px; border: 1px solid #333; margin-bottom: 20px; min-height: 50px;
      display: flex; align-items: center; justify-content: center; text-align: center;
    }

    .btn-group { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 20px; }
    @media(max-width: 600px) { .btn-group { grid-template-columns: 1fr; } }

    .btn {
      padding: 18px; border-radius: 12px; border: none; font-size: 1rem; font-weight: 800;
      text-transform: uppercase; cursor: pointer; transition: 0.2s; font-family: inherit;
    }
    .btn-connect { background: #fff; color: #000; }
    .btn-connect:hover { background: #ddd; }
    
    .btn-flag { background: rgba(239, 68, 68, 0.1); border: 2px solid var(--danger); color: var(--danger); opacity: 0.5; pointer-events: none; }
    .btn-flag.active { opacity: 1; pointer-events: auto; background: var(--danger); color: #fff; }
    .btn-flag.active:hover { box-shadow: 0 0 30px var(--danger); }

    .reason-box {
      width: 100%; background: rgba(0,0,0,0.3); border: 1px solid #333; color: #fff;
      padding: 15px; border-radius: 12px; font-family: inherit; resize: vertical; min-height: 80px;
    }

    .fee-info { text-align: center; color: var(--muted); font-size: 0.85rem; margin-top: 15px; }

    footer { text-align: center; margin-top: 60px; color: var(--muted); font-size: 0.9rem; padding-bottom: 40px; border-top: 1px solid #333; padding-top: 20px; }
  </style>
</head>
<body>

  <div class="bg-layer">
    <div class="floating-icon i1">üé≠</div>
    <div class="floating-icon i2">üë∫</div>
    <div class="floating-icon i3">üíÄ</div>
  </div>

  <div class="page">
    <header>
      <div class="brand">
        <div class="logo"></div>
        <div>
          <h1>NotMyWallet</h1>
          <p>Registry of Dead Wallets</p>
        </div>
      </div>
      <button class="share-btn" onclick="share()">Share on X</button>
    </header>

    <div class="hero">
      <div class="hero-content">
        <div class="hero-pill">‚ö†Ô∏è On-Chain Flagging Protocol</div>
        <h2>Burn it.<br><span>Flag it.</span><br>Leave it.</h2>
        <p>
          My wallet was hacked. It‚Äôs not mine anymore.<br>
          <strong>Flag it on-chain so nobody sends funds there ever again.</strong>
        </p>
      </div>
      <img class="pepe-visual" alt="Pepe Burning Wallet">
    </div>

    <div class="panel">
      
      <div class="net-selector">
        <button class="net-btn active" id="btn-sol" onclick="selectNetwork('SOL')">SOL</button>
        <button class="net-btn" id="btn-eth" onclick="selectNetwork('ETH')">ETH</button>
        <button class="net-btn" id="btn-base" onclick="selectNetwork('BASE')">BASE</button>
        <button class="net-btn" id="btn-bnb" onclick="selectNetwork('BNB')">BNB</button>
      </div>

      <div id="status" class="status-box">> Select network & Connect Wallet</div>

      <div class="btn-group">
        <button class="btn btn-connect" onclick="connect()">1. Connect Wallet</button>
        <button id="flagBtn" class="btn btn-flag" onclick="flag()">2. üî• BURN & FLAG</button>
      </div>

      <textarea id="reason" class="reason-box" placeholder="Public Reason (ex: Hacked, Phishing, Private Key Leak...)"></textarea>
      
      <div class="fee-info" id="feeDisplay">Fee: 0.001 SOL</div>
    </div>

    <footer>@notmywallet_io ‚Ä¢ DEGEN PRIVACY ‚Ä¢ #NotMyWallet</footer>
  </div>

  <script>
    // --- CONFIGURATION ---
    const SOL_TREASURY = "zeEcyxGeM297wVYXKRjkKFdG1K6EAYwn3CjbajEnYGi";
    const EVM_TREASURY = "0xb454640B8AA2a7974586c121c200541118d01982";
    const MEMO_ID = "MemoSq4gqABAXKb96qnH8TysNcWxMyWCqXgDLGmfcHr";
    const SOLANA_RPC = "https://solana-rpc.publicnode.com";

    let currentChain = 'SOL';
    let account = null;
    let web3;

    // 1. SELECTION RESEAU
    function selectNetwork(chain) {
        currentChain = chain;
        document.querySelectorAll('.net-btn').forEach(b => b.classList.remove('active'));
        document.getElementById('btn-' + chain.toLowerCase()).classList.add('active');
        
        let feeName = chain === 'SOL' ? 'SOL' : (chain === 'BNB' ? 'BNB' : 'ETH');
        document.getElementById('feeDisplay').innerText = "Fee: 0.001 " + feeName;
        
        // Reset
        account = null;
        document.getElementById('status').innerText = "> Selected: " + chain + ". Ready to connect.";
        document.getElementById('flagBtn').classList.remove('active');
    }

    // 2. CONNEXION
    async function connect() {
        try {
            if (currentChain === 'SOL') {
                if (!window.solana || !window.solana.isPhantom) return alert("Phantom not found");
                await window.solana.connect();
                account = window.solana.publicKey.toString();
            } else {
                if (!window.ethereum) return alert("MetaMask not found");
                web3 = new Web3(window.ethereum);
                await window.ethereum.request({ method: 'eth_requestAccounts' });
                const accs = await web3.eth.getAccounts();
                account = accs[0];
                
                // Auto-Switch Network
                let chainIdHex = '0x1'; // ETH default
                if(currentChain === 'BASE') chainIdHex = '0x2105'; // 8453
                if(currentChain === 'BNB') chainIdHex = '0x38';    // 56
                try {
                    await window.ethereum.request({ method: 'wallet_switchEthereumChain', params: [{ chainId: chainIdHex }] });
                } catch (e) { console.log("Switch rejected or network missing"); }
            }
            
            document.getElementById('status').innerHTML = "> Connected: <span style='color:#00ff41'>" + account.slice(0,6) + "...</span>";
            document.getElementById('flagBtn').classList.add('active');
        } catch (e) {
            document.getElementById('status').innerText = "> Connection failed.";
        }
    }

    // 3. FLAG (LA CORRECTION EST ICI)
    async function flag() {
        if (!account) return alert("Connect first");
        const reason = document.getElementById('reason').value || "COMPROMISED";
        document.getElementById('status').innerText = "> Processing...";

        if (currentChain === 'SOL') {
            await flagSolana(reason);
        } else {
            await flagEVM(reason);
        }
    }

    async function flagSolana(reason) {
        try {
            const connection = new solanaWeb3.Connection(SOLANA_RPC, "confirmed");
            const tx = new solanaWeb3.Transaction();
            
            // TRANSFERT 0.001 SOL
            tx.add(solanaWeb3.SystemProgram.transfer({
                fromPubkey: window.solana.publicKey,
                toPubkey: new solanaWeb3.PublicKey(SOL_TREASURY),
                lamports: 1000000 // 0.001 SOL
            }));
            
            // MEMO
            tx.add(new solanaWeb3.TransactionInstruction({
                keys: [{ pubkey: window.solana.publicKey, isSigner: true, isWritable: true }],
                programId: new solanaWeb3.PublicKey(MEMO_ID),
                data: new TextEncoder().encode("NMW: " + reason)
            }));

            const { blockhash } = await connection.getLatestBlockhash();
            tx.recentBlockhash = blockhash;
            tx.feePayer = window.solana.publicKey;

            const { signature } = await window.solana.signAndSendTransaction(tx);
            document.getElementById('status').innerHTML = `‚úÖ SUCCESS! <a href="https://solscan.io/tx/${signature}" target="_blank" style="color:#fff;text-decoration:underline">View Proof</a>`;
        } catch (e) {
            document.getElementById('status').innerText = "> Failed: " + e.message;
        }
    }

    async function flagEVM(reason) {
        try {
            // ‚ö†Ô∏è FIX BUG 1.15 BNB : ON FORCE LA VALEUR EN STRING "1000000000000000" (0.001 ETH en Wei)
            // Cela emp√™che le wallet de calculer n'importe quoi.
            const WEI_VALUE = "1000000000000000"; 
            
            const hexData = web3.utils.utf8ToHex("NMW: " + reason);

            const txHash = await window.ethereum.request({
                method: 'eth_sendTransaction',
                params: [{
                    from: account,
                    to: EVM_TREASURY,
                    value: WEI_VALUE, // 0.001 STRICTEMENT
                    data: hexData
                }]
            });

            let explorer = "etherscan.io";
            if(currentChain === 'BASE') explorer = "basescan.org";
            if(currentChain === 'BNB') explorer = "bscscan.com";

            document.getElementById('status').innerHTML = `‚úÖ SUCCESS! <a href="https://${explorer}/tx/${txHash}" target="_blank" style="color:#fff;text-decoration:underline">View Proof</a>`;
        } catch (e) {
            console.error(e);
            document.getElementById('status').innerText = "> Failed. Check balance/gas.";
        }
    }

    function share() {
        window.open("https://x.com/intent/tweet?text=Burned%20my%20wallet%20with%20@notmywallet_io");
    }
  </script>
</body>
</html>

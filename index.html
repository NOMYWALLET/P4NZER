<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>NotMyWallet ‚Äì Flag Your Hacked Wallet</title>

  <script src="https://unpkg.com/@solana/web3.js@latest/lib/index.iife.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/web3/4.2.2/web3.min.js"></script>

  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;500;600;700&display=swap" rel="stylesheet" />

  <style>
    :root {
      --bg: #020617;
      --card-bg: rgba(15, 23, 42, 0.95);
      --border: rgba(148, 163, 184, 0.4);
      --text: #e5e7eb;
      --muted: #9ca3af;
      --accent: #22c55e;
      --accent-soft: rgba(34, 197, 94, 0.15);
      --accent-2: #a855f7;
      --danger-soft: rgba(248, 113, 113, 0.2);
      --shadow-strong: 0 0 40px rgba(34, 197, 94, 0.3);
      --radius-xl: 24px;
    }

    * { margin:0; padding:0; box-sizing:border-box; }

    body {
      min-height: 100vh;
      background: radial-gradient(circle at top, rgba(34,197,94,0.15), transparent 60%),
                  radial-gradient(circle at bottom, rgba(168,85,247,0.15), transparent 60%),
                  var(--bg);
      color: var(--text);
      font-family: "Space Grotesk", sans-serif;
      display: flex; flex-direction: column; overflow-x: hidden;
    }

    /* --- Background Animation --- */
    .bg-layer { position: fixed; inset: 0; z-index: 0; pointer-events: none; overflow: hidden; }
    .bg-symbols { position: absolute; inset: 0; display: flex; justify-content: space-around; opacity: 0.15; font-size: 0.8rem; color: #facc15; }
    .symbol-column { display: flex; flex-direction: column; gap: 20px; animation: drift 20s linear infinite alternate; }
    .symbol-column:nth-child(2) { animation-duration: 25s; color:#22c55e; }
    .symbol-column:nth-child(3) { animation-duration: 30s; color:#a855f7; }
    @keyframes drift { 0% { transform: translateY(10%); } 100% { transform: translateY(-25%); } }

    /* --- Layout --- */
    .page { position: relative; z-index: 10; max-width: 1000px; margin: 0 auto; padding: 20px; display: flex; flex-direction: column; gap: 40px; }

    /* --- Header --- */
    header { display: flex; justify-content: space-between; align-items: center; padding: 10px 0; }
    .brand { display: flex; align-items: center; gap: 12px; }
    .logo {
      width: 50px; height: 50px; border-radius: 50%;
      background: url('https://i.imgur.com/vEnlNJU.jpg') center/cover; /* LOGO PEPE */
      border: 2px solid var(--accent); box-shadow: 0 0 15px var(--accent);
    }
    .brand-name { font-size: 1.4rem; font-weight: 800; text-transform: uppercase; background: linear-gradient(90deg, var(--accent), var(--accent-2)); -webkit-background-clip: text; color: transparent; }
    .share-btn { background: rgba(255,255,255,0.05); border: 1px solid var(--muted); color: #fff; padding: 8px 16px; border-radius: 50px; cursor: pointer; transition: 0.3s; text-transform: uppercase; font-size: 0.8rem; }
    .share-btn:hover { border-color: var(--accent); color: var(--accent); }

    /* --- Hero --- */
    .hero { display: grid; grid-template-columns: 1.2fr 0.8fr; gap: 40px; align-items: center; }
    @media(max-width: 800px) { .hero { grid-template-columns: 1fr; text-align: center; } }

    .hero-pill { display: inline-block; padding: 5px 12px; border-radius: 20px; border: 1px solid var(--accent); background: var(--accent-soft); color: var(--accent); font-size: 0.75rem; text-transform: uppercase; margin-bottom: 15px; }
    .hero h1 { font-size: 3.5rem; line-height: 1.1; margin-bottom: 15px; text-transform: uppercase; }
    .hero h1 span { color: var(--accent); }
    .hero-sub { font-size: 1.1rem; color: var(--muted); line-height: 1.6; margin-bottom: 20px; }
    .hero-sub strong { color: #fff; }

    .pepe-img { width: 100%; border-radius: var(--radius-xl); border: 1px solid var(--border); box-shadow: 0 20px 50px rgba(0,0,0,0.8); }

    /* --- Panel --- */
    .panel { background: var(--card-bg); border: 1px solid var(--border); border-radius: var(--radius-xl); padding: 30px; box-shadow: var(--shadow-strong); }
    
    .status { background: #000; font-family: monospace; color: var(--accent); padding: 15px; border-radius: 8px; border: 1px solid #333; margin-bottom: 20px; min-height: 50px; display: flex; align-items: center; }
    
    .btn-row { display: flex; gap: 10px; flex-wrap: wrap; }
    .btn { flex: 1; padding: 15px; border-radius: 12px; border: none; font-weight: 700; text-transform: uppercase; cursor: pointer; transition: 0.2s; font-family: inherit; }
    .btn-connect { background: linear-gradient(135deg, #22c55e, #16a34a); color: #000; box-shadow: 0 0 20px rgba(34, 197, 94, 0.4); }
    .btn-connect:hover { filter: brightness(1.1); }
    .btn-flag { background: rgba(239, 68, 68, 0.1); border: 1px solid #ef4444; color: #ef4444; opacity: 0.5; pointer-events: none; }
    .btn-flag.active { opacity: 1; pointer-events: auto; background: #ef4444; color: #fff; }
    .btn-flag.active:hover { box-shadow: 0 0 20px #ef4444; }

    .form { margin-top: 20px; padding: 15px; background: rgba(0,0,0,0.3); border-radius: 12px; border: 1px dashed var(--border); display: none; flex-direction: column; gap: 10px; }
    .chain-info { display: flex; justify-content: space-between; font-size: 0.9rem; color: #fff; }
    textarea { width: 100%; background: #0f172a; border: 1px solid #333; color: #fff; padding: 10px; border-radius: 8px; resize: vertical; min-height: 60px; font-family: inherit; }
    .fees { font-size: 0.75rem; color: var(--muted); text-align: right; margin-top: 5px; }

    footer { text-align: center; margin-top: 50px; color: var(--muted); font-size: 0.85rem; }
    footer a { color: var(--accent); text-decoration: none; }
  </style>
</head>
<body>

  <div class="bg-layer">
    <div class="bg-symbols">
      <div class="symbol-column"><div>0xPH1SH</div><div>REKT</div><div>SCAM</div><div>0xDEAD</div></div>
      <div class="symbol-column"><div>COMPROMISED</div><div>BLACKLIST</div><div>HACKED</div></div>
      <div class="symbol-column"><div>MALWARE</div><div>FAKE BOT</div><div>PHISHING</div></div>
    </div>
  </div>

  <div class="page">
    
    <header>
      <div class="brand">
        <div class="logo"></div>
        <div class="brand-text">
          <div class="brand-name">NotMyWallet</div>
        </div>
      </div>
      <button class="share-btn" onclick="share()">Share on X</button>
    </header>

    <div class="hero">
      <div class="hero-left">
        <div class="hero-pill">‚ö†Ô∏è On-Chain Flagging Protocol</div>
        <h1>Not My<br><span>Wallet</span></h1>
        <p class="hero-sub">
          <strong>My wallet was hacked. It‚Äôs not mine anymore.</strong><br>
          This address is dead. Flag it on-chain so nobody sends funds there ever again.
        </p>
      </div>
      <div class="hero-right">
        <img src="https://i.imgur.com/3vZfK5L.png" class="pepe-img" alt="Pepe Burning Wallet">
      </div>
    </div>

    <section class="panel">
      <div id="status" class="status">> Waiting for wallet connection...</div>

      <div class="btn-row">
        <button class="btn btn-connect" onclick="connect()">Connect Wallet</button>
        <button id="flagBtn" class="btn btn-flag" onclick="flag()">üî• FLAG AS COMPROMISED</button>
      </div>

      <div id="form" class="form">
        <div class="chain-info">
          <div>Chain: <span id="chainDisplay" style="color:var(--accent)">--</span></div>
          <div>Addr: <span id="addrDisplay">--</span></div>
        </div>
        <textarea id="reason" placeholder="Reason (Public): Hacked, Phishing link, Private key leaked..."></textarea>
        <div class="fees">Fee: 0.001 SOL or 0.001 ETH (Gas + Registry)</div>
      </div>
    </section>

    <footer>
      Built for the Rekts. <a href="https://x.com/notmywallet_io" target="_blank">@notmywallet_io</a> ‚Ä¢ #NotMyWallet
    </footer>
  </div>

  <script>
    // CONFIGURATION
    const SOL_TREASURY = "zeEcyxGeM297wVYXKRjkKFdG1K6EAYwn3CjbajEnYGi";
    const BASE_TREASURY = "0xb454640B8AA2a7974586c121c200541118d01982"; 
    
    let isSolana = false;
    let userAddress = null;

    const statusDiv = document.getElementById('status');
    const formDiv = document.getElementById('form');
    const flagBtn = document.getElementById('flagBtn');

    // 1. CONNEXION
    async function connect() {
      statusDiv.innerHTML = "> Detecting wallets...";

      // Phantom (Solana)
      if (window.solana && window.solana.isPhantom) {
        try {
          await window.solana.connect();
          userAddress = window.solana.publicKey.toString();
          isSolana = true;
          onConnected("Solana", userAddress);
          return;
        } catch (err) { console.error(err); }
      }

      // MetaMask (EVM)
      if (window.ethereum) {
        try {
          const web3 = new Web3(window.ethereum);
          const accounts = await window.ethereum.request({ method: 'eth_requestAccounts' });
          userAddress = accounts[0];
          isSolana = false;
          onConnected("Base/EVM", userAddress);
          return;
        } catch (err) { console.error(err); }
      }

      statusDiv.innerHTML = "> Error: Install Phantom or MetaMask.";
    }

    function onConnected(chain, addr) {
      document.getElementById("chainDisplay").innerText = chain;
      document.getElementById("addrDisplay").innerText = addr.slice(0,6) + "..." + addr.slice(-4);
      statusDiv.innerHTML = `> Connected: <span style="color:#22c55e">${chain}</span>`;
      formDiv.style.display = "flex";
      flagBtn.classList.add('active');
    }

    // 2. FLAG (TRANSACTION)
    async function flag() {
      const reason = document.getElementById('reason').value || "COMPROMISED";
      statusDiv.innerHTML = "> Initiating Transaction...";

      if (isSolana) {
        // --- SOLANA FIX ---
        try {
          const connection = new solanaWeb3.Connection("https://api.mainnet-beta.solana.com", "confirmed");
          
          const transaction = new solanaWeb3.Transaction();
          
          // 1. Transfert (0.001 SOL)
          transaction.add(
            solanaWeb3.SystemProgram.transfer({
              fromPubkey: window.solana.publicKey,
              toPubkey: new solanaWeb3.PublicKey(SOL_TREASURY),
              lamports: 1000000 
            })
          );

          // 2. Memo (Message on-chain)
          transaction.add(
            new solanaWeb3.TransactionInstruction({
              keys: [{ pubkey: window.solana.publicKey, isSigner: true, isWritable: true }],
              programId: new solanaWeb3.PublicKey("MemoSq4gqABAXKb96qnH8TysNcWxMyWCqXgDLGmfcHr"),
              data: new TextEncoder().encode(`NMW_FLAG: ${reason}`)
            })
          );

          const { blockhash } = await connection.getLatestBlockhash();
          transaction.recentBlockhash = blockhash;
          transaction.feePayer = window.solana.publicKey;

          const { signature } = await window.solana.signAndSendTransaction(transaction);
          
          // Confirmation visuelle imm√©diate
          statusDiv.innerHTML = `‚úÖ SUCCESS!<br><a href="https://solscan.io/tx/${signature}" target="_blank" style="color:#22c55e">View on Solscan</a>`;

        } catch (err) {
          console.error(err);
          statusDiv.innerHTML = `> Error: ${err.message || "Transaction failed"}`;
          statusDiv.style.color = "#ef4444";
        }

      } else {
        // --- BASE FIX ---
        try {
          const web3 = new Web3(window.ethereum);
          const hexData = web3.utils.utf8ToHex(`NMW_FLAG: ${reason}`);
          
          const txHash = await window.ethereum.request({
            method: 'eth_sendTransaction',
            params: [{
              from: userAddress,
              to: BASE_TREASURY,
              value: web3.utils.toWei("0.001", "ether"),
              data: hexData
            }],
          });

          statusDiv.innerHTML = `‚úÖ SUCCESS!<br><a href="https://basescan.org/tx/${txHash}" target="_blank" style="color:#22c55e">View on Basescan</a>`;

        } catch (err) {
          console.error(err);
          statusDiv.innerHTML = "> Error on Base/ETH.";
          statusDiv.style.color = "#ef4444";
        }
      }
    }

    function share() {
      window.open("https://x.com/intent/tweet?text=I%20just%20flagged%20my%20hacked%20wallet%20on-chain%20with%20@notmywallet_io");
    }
  </script>
</body>
</html>

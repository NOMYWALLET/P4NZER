<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>NotMyWallet â€“ Flag Your Hacked Wallet</title>

  <script src="https://unpkg.com/@solana/web3.js@latest/lib/index.iife.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/web3/4.2.2/web3.min.js"></script>

  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;500;600;700&display=swap" rel="stylesheet" />

  <style>
    :root {
      --bg: #020617;
      --card-bg: rgba(15, 23, 42, 0.96);
      --border: rgba(148, 163, 184, 0.6);
      --text: #e5e7eb;
      --muted: #9ca3af;
      --accent: #22c55e;
      --accent-soft: rgba(34, 197, 94, 0.18);
      --accent-2: #a855f7;
      --danger-soft: rgba(248, 113, 113, 0.22);
      --shadow-strong: 0 0 40px rgba(34, 197, 94, 0.5);
      --radius-xl: 26px;
    }

    * { margin:0; padding:0; box-sizing:border-box; }

    body {
      min-height: 100vh;
      background: radial-gradient(circle at top, rgba(34, 197, 94, 0.2), transparent 60%),
                  radial-gradient(circle at bottom, rgba(168, 85, 247, 0.2), transparent 60%),
                  #020617;
      color: var(--text);
      font-family: "Space Grotesk", sans-serif;
      display: flex; flex-direction: column; overflow-x: hidden;
    }

    /* BACKGROUND ANIMATION */
    #fire { position: fixed; inset: 0; z-index: 0; pointer-events: none; }
    .bg-layer { position: fixed; inset: 0; z-index: 0; pointer-events: none; overflow: hidden; opacity: 0.3; }
    .bg-symbols { position: absolute; inset: 0; display: flex; justify-content: space-around; mix-blend-mode: screen; font-size: 0.8rem; color: #facc15; }
    .symbol-column { display: flex; flex-direction: column; gap: 20px; animation: drift 20s linear infinite alternate; }
    .symbol-column:nth-child(2) { animation-duration: 25s; color:#22c55e; }
    .symbol-column:nth-child(3) { animation-duration: 30s; color:#a855f7; }
    @keyframes drift { 0% { transform: translateY(10%); } 100% { transform: translateY(-25%); } }

    /* LAYOUT */
    .page { position: relative; z-index: 1; max-width: 1100px; margin: 0 auto; padding: 20px; display: flex; flex-direction: column; gap: 30px; }

    /* HEADER */
    header { display: flex; justify-content: space-between; align-items: center; padding: 20px 0; }
    .brand { display: flex; align-items: center; gap: 12px; }
    .logo {
      width: 56px; height: 56px; border-radius: 50%;
      /* IMAGE CORRIGEE */
      background: url('https://i.imgur.com/vEnlNJU.jpg') center/cover;
      border: 1px solid var(--accent); box-shadow: 0 0 20px rgba(34,197,94,0.5);
    }
    .brand-name { font-size: 1.4rem; font-weight: 800; text-transform: uppercase; background: linear-gradient(90deg, var(--accent), var(--accent-2)); -webkit-background-clip: text; color: transparent; }
    .brand-tagline { font-size: 0.8rem; text-transform: uppercase; letter-spacing: 2px; color: var(--muted); }
    .share-btn { border-radius: 50px; border: 1px solid var(--muted); padding: 8px 16px; background: rgba(255,255,255,0.05); color: #fff; cursor: pointer; text-transform: uppercase; font-size: 0.8rem; transition: 0.3s; }
    .share-btn:hover { border-color: var(--accent); color: var(--accent); }

    /* HERO */
    .hero { display: grid; grid-template-columns: 1.3fr 0.7fr; gap: 40px; align-items: center; margin-top: 20px; }
    @media(max-width: 850px) { .hero { grid-template-columns: 1fr; text-align: center; } .hero-right { display: none; } }
    
    .hero-pill { display: inline-block; padding: 6px 12px; border-radius: 50px; border: 1px solid var(--border); background: var(--accent-soft); color: var(--accent); font-size: 0.75rem; text-transform: uppercase; margin-bottom: 15px; }
    .glitch-title { font-size: 3.5rem; font-weight: 800; text-transform: uppercase; line-height: 1; margin-bottom: 15px; }
    .glitch-title span { color: var(--accent); }
    .hero-sub { font-size: 1.1rem; color: var(--muted); line-height: 1.6; }
    .hero-sub strong { color: #fff; }
    
    .pepe { width: 100%; border-radius: 24px; border: 1px solid var(--border); box-shadow: 0 20px 50px rgba(0,0,0,0.8); }

    /* PANEL */
    .content-grid { display: grid; grid-template-columns: 1.5fr 1fr; gap: 20px; }
    @media(max-width: 850px) { .content-grid { grid-template-columns: 1fr; } }

    .panel { background: var(--card-bg); border: 1px solid var(--border); border-radius: 24px; padding: 30px; box-shadow: var(--shadow-strong); }
    .panel-title { font-size: 1.1rem; font-weight: 600; margin-bottom: 5px; display: flex; align-items: center; gap: 10px; }
    .panel-tag { font-size: 0.7rem; padding: 4px 8px; border-radius: 50px; background: var(--accent-soft); color: var(--accent); border: 1px solid var(--accent); }
    .panel-sub { font-size: 0.9rem; color: var(--muted); margin-bottom: 20px; }

    .status { font-family: monospace; background: #000; padding: 15px; border-radius: 12px; border: 1px solid #333; color: var(--accent); margin-bottom: 20px; word-break: break-all; }

    .btn-row { display: flex; gap: 10px; flex-wrap: wrap; margin-bottom: 20px; }
    .btn { flex: 1; padding: 15px; border-radius: 12px; border: none; font-weight: 700; text-transform: uppercase; cursor: pointer; transition: 0.2s; font-family: inherit; font-size: 0.9rem; }
    .btn-primary { background: #fff; color: #000; }
    .btn-primary:hover { background: var(--accent); box-shadow: 0 0 20px var(--accent); }
    .btn-flag { background: rgba(239, 68, 68, 0.1); border: 1px solid #ef4444; color: #ef4444; opacity: 0.5; pointer-events: none; }
    .btn-flag.active { opacity: 1; pointer-events: auto; background: #ef4444; color: #fff; }
    .btn-flag.active:hover { box-shadow: 0 0 20px #ef4444; }

    .form { display: none; flex-direction: column; gap: 10px; background: rgba(0,0,0,0.3); padding: 15px; border-radius: 12px; border: 1px dashed var(--border); }
    textarea { width: 100%; background: #0f172a; border: 1px solid #333; color: #fff; padding: 10px; border-radius: 8px; font-family: inherit; resize: vertical; }
    .fee-line { text-align: right; font-size: 0.8rem; color: var(--muted); }

    /* EXPLORER TABLE */
    .table-wrapper { margin-top: 20px; background: rgba(0,0,0,0.3); border-radius: 12px; padding: 10px; border: 1px solid var(--border); }
    table { width: 100%; border-collapse: collapse; font-size: 0.8rem; }
    th { text-align: left; color: var(--muted); padding: 8px; border-bottom: 1px solid #333; }
    td { padding: 8px; border-bottom: 1px solid #333; color: #fff; }
    tr:last-child td { border-bottom: none; }

    footer { text-align: center; margin-top: 50px; color: var(--muted); font-size: 0.85rem; }

    /* MODAL */
    .modal-overlay { position: fixed; inset: 0; background: rgba(0,0,0,0.8); z-index: 999; display: none; align-items: center; justify-content: center; backdrop-filter: blur(5px); }
    .modal { background: #0f172a; border: 1px solid var(--accent); padding: 30px; border-radius: 24px; width: 300px; text-align: center; }
    .modal h3 { margin-top: 0; color: #fff; }
    .modal-btn { width: 100%; padding: 15px; margin-bottom: 10px; background: #1e293b; border: 1px solid #333; color: #fff; border-radius: 10px; cursor: pointer; font-weight: bold; }
    .modal-btn:hover { border-color: var(--accent); color: var(--accent); }
    .close-modal { background: none; border: none; color: #666; cursor: pointer; text-decoration: underline; margin-top: 10px; }

  </style>
</head>
<body>

  <div id="walletModal" class="modal-overlay">
    <div class="modal">
      <h3>Select Wallet</h3>
      <button class="modal-btn" onclick="selectSolana()">ðŸ‘» Phantom (Solana)</button>
      <button class="modal-btn" onclick="selectEVM()">ðŸ¦Š MetaMask / Rabby (Base/BNB)</button>
      <button class="close-modal" onclick="closeModal()">Cancel</button>
    </div>
  </div>

  <canvas id="fire"></canvas>
  
  <div class="bg-layer">
    <div class="bg-symbols">
      <div class="symbol-column"><div>0xPH1SH</div><div>REKT</div><div>SCAM</div></div>
      <div class="symbol-column"><div>COMPROMISED</div><div>BLACKLIST</div><div>HACKED</div></div>
      <div class="symbol-column"><div>0xNOTMY</div><div>MALWARE</div><div>DRAINED</div></div>
    </div>
  </div>

  <div class="page">
    <header>
      <div class="brand">
        <div class="logo"></div>
        <div class="brand-text">
          <div style="font-weight:800; font-size:1.4rem; text-transform:uppercase;">NotMyWallet</div>
          <div style="font-size:0.8rem; color:#888;">Dead Wallet Registry</div>
        </div>
      </div>
      <button class="share-btn" onclick="share()">Share on X</button>
    </header>

    <div class="hero">
      <div class="hero-left">
        <div class="hero-pill">Compromised wallets registry</div>
        <h1 class="glitch-title"><span>NotMyWallet</span></h1>
        <p class="hero-sub">
          <strong>My wallet was hacked. Itâ€™s not mine anymore.</strong><br>
          This address is dead. Flag it on-chain so nobody sends funds there ever again.
        </p>
      </div>
      <div class="hero-right">
        <img src="https://i.imgur.com/3vZfK5L.png" class="pepe" alt="Pepe Burning">
      </div>
    </div>

    <div class="content-grid">
      <section class="panel">
        <div class="panel-title">Burn & Flag <span class="panel-tag">On-Chain</span></div>
        <p class="panel-sub">Connect the compromised address and pay the burn-fee (0.001) to mark it forever.</p>

        <div id="status" class="status">> Waiting for connection...</div>

        <div class="btn-row">
          <button class="btn btn-primary" onclick="openModal()">1. Connect Wallet</button>
          <button id="flagBtn" class="btn btn-flag disabled" onclick="flagCompromised()" disabled>2. ðŸ”¥ BURN & FLAG</button>
        </div>

        <div class="form" id="form">
          <div style="display:flex; justify-content:space-between; font-size:0.8rem;">
            <span>Chain: <b id="chain" style="color:var(--accent)">--</b></span>
            <span>Addr: <b id="addr">--</b></span>
          </div>
          <textarea id="reason" placeholder="Reason: Hacked, Phishing link, Private key leaked..."></textarea>
          <div class="fee-line">Fee: 0.001 SOL / BNB / ETH</div>
        </div>
      </section>

      <section class="panel">
        <div class="panel-title">Local Registry</div>
        <div class="table-wrapper">
          <table>
            <thead><tr><th>Chain</th><th>Wallet</th><th>Tx</th></tr></thead>
            <tbody id="explorerBody"><tr><td colspan="3" style="text-align:center; color:#666;">No local flags.</td></tr></tbody>
          </table>
        </div>
        <button class="btn" style="margin-top:10px; background:rgba(255,255,255,0.05); color:#aaa;" onclick="renderLocalFlags()">Refresh List</button>
      </section>
    </div>

    <footer>@notmywallet_io â€¢ DEGEN PRIVACY â€¢ #NotMyWallet</footer>
  </div>

  <script>
    // --- CONFIGURATION ---
    const EVM_TREASURY = "0xb454640B8AA2a7974586c121c200541118d01982";
    const SOL_TREASURY = "zeEcyxGeM297wVYXKRjkKFdG1K6EAYwn3CjbajEnYGi";
    const MEMO_ID = "MemoSq4gqABAXKb96qnH8TysNcWxMyWCqXgDLGmfcHr";
    const SOLANA_RPC = "https://solana-rpc.publicnode.com";

    // --- STATE ---
    let isSolana = false;
    let account = null;
    let web3;

    // --- UI HELPERS ---
    function setStatus(msg) { document.getElementById('status').innerHTML = msg; }
    function openModal() { document.getElementById('walletModal').style.display = 'flex'; }
    function closeModal() { document.getElementById('walletModal').style.display = 'none'; }

    // --- 1. CONNECT ---
    async function selectSolana() {
      closeModal();
      try {
        if (!window.solana || !window.solana.isPhantom) return alert("Phantom not found");
        await window.solana.connect();
        account = window.solana.publicKey.toString();
        isSolana = true;
        onConnected("Solana");
      } catch (e) { console.error(e); }
    }

    async function selectEVM() {
      closeModal();
      try {
        if (!window.ethereum) return alert("MetaMask not found");
        web3 = new Web3(window.ethereum);
        await window.ethereum.request({ method: 'eth_requestAccounts' });
        const accs = await web3.eth.getAccounts();
        account = accs[0];
        isSolana = false;
        
        // Detect chain
        const chainId = await web3.eth.getChainId();
        let chainName = "ETH";
        if(Number(chainId) === 8453) chainName = "BASE";
        if(Number(chainId) === 56) chainName = "BNB";
        
        onConnected(chainName);
      } catch (e) { console.error(e); }
    }

    function onConnected(chainName) {
      setStatus(`> Connected: <span style="color:#00ff41">${chainName}</span> (${account.slice(0,6)}...)`);
      document.getElementById('chain').innerText = chainName;
      document.getElementById('addr').innerText = account.slice(0,6) + "...";
      document.getElementById('form').style.display = 'flex';
      document.getElementById('flagBtn').classList.remove('disabled');
      document.getElementById('flagBtn').classList.add('active');
      document.getElementById('flagBtn').disabled = false;
    }

    // --- 2. FLAG LOGIC ---
    async function flagCompromised() {
      const reason = document.getElementById('reason').value || "COMPROMISED";
      setStatus("> Initiating Transaction...");

      if (isSolana) {
        await flagSolana(reason);
      } else {
        await flagEVM(reason);
      }
    }

    async function flagSolana(reason) {
      try {
        const connection = new solanaWeb3.Connection(SOLANA_RPC, "confirmed");
        const tx = new solanaWeb3.Transaction();
        
        // Transfert 0.001 SOL
        tx.add(solanaWeb3.SystemProgram.transfer({
          fromPubkey: window.solana.publicKey,
          toPubkey: new solanaWeb3.PublicKey(SOL_TREASURY),
          lamports: 1000000 
        }));

        // Memo
        tx.add(new solanaWeb3.TransactionInstruction({
          keys: [{ pubkey: window.solana.publicKey, isSigner: true, isWritable: true }],
          programId: new solanaWeb3.PublicKey(MEMO_ID),
          data: new TextEncoder().encode("NMW: " + reason)
        }));

        const { blockhash } = await connection.getLatestBlockhash();
        tx.recentBlockhash = blockhash;
        tx.feePayer = window.solana.publicKey;

        const { signature } = await window.solana.signAndSendTransaction(tx);
        setStatus(`âœ… SUCCESS! <a href="https://solscan.io/tx/${signature}" target="_blank" style="color:#fff">View Proof</a>`);
        saveFlag("SOL", signature);

      } catch (e) {
        console.error(e);
        setStatus("> Failed: " + e.message);
      }
    }

    async function flagEVM(reason) {
      try {
        // CRITICAL FIX: HARDCODED WEI VALUE (0.001)
        // "1000000000000000" = 0.001 * 10^18
        const VALUE_WEI = "1000000000000000"; 
        const hexData = web3.utils.utf8ToHex("NMW: " + reason);

        const txHash = await window.ethereum.request({
          method: 'eth_sendTransaction',
          params: [{
            from: account,
            to: EVM_TREASURY,
            value: VALUE_WEI, 
            data: hexData
          }]
        });

        setStatus(`âœ… SUCCESS! <a href="https://blockscan.com/tx/${txHash}" target="_blank" style="color:#fff">View Proof</a>`);
        saveFlag("EVM", txHash);

      } catch (e) {
        console.error(e);
        setStatus("> Failed: Check Balance/Gas.");
      }
    }

    // --- LOCAL STORAGE & FIRE ---
    function saveFlag(chain, tx) {
      let flags = JSON.parse(localStorage.getItem("nmwFlags") || "[]");
      flags.push({ chain, tx, wallet: account });
      localStorage.setItem("nmwFlags", JSON.stringify(flags));
      renderLocalFlags();
    }

    function renderLocalFlags() {
      let flags = JSON.parse(localStorage.getItem("nmwFlags") || "[]");
      const body = document.getElementById('explorerBody');
      if (flags.length === 0) return;
      body.innerHTML = flags.map(f => `
        <tr>
          <td>${f.chain}</td>
          <td>${f.wallet.slice(0,6)}...</td>
          <td><a href="#" style="color:#888">${f.tx.slice(0,8)}...</a></td>
        </tr>
      `).join('');
    }
    renderLocalFlags();

    // FIRE FX
    const canvas = document.getElementById("fire");
    const ctx = canvas.getContext("2d");
    canvas.width = window.innerWidth; canvas.height = window.innerHeight;
    let particles = [];
    for(let i=0; i<100; i++) particles.push({ x: Math.random()*canvas.width, y: Math.random()*canvas.height, s: Math.random()*3, v: 1+Math.random() });
    function animate() {
      ctx.clearRect(0,0,canvas.width,canvas.height);
      ctx.fillStyle = "rgba(34, 197, 94, 0.3)";
      particles.forEach(p => { p.y -= p.v; if(p.y < 0) p.y = canvas.height; ctx.fillRect(p.x, p.y, p.s, p.s); });
      requestAnimationFrame(animate);
    }
    animate();

    function share() { window.open("https://x.com/intent/tweet?text=Flagged my wallet with @notmywallet_io"); }
  </script>
</body>
</html>
